<html>
  <head>
    <style type="text/css">{ margin: 0; padding: 0; }</style>
    <script type="text/javascript" src="node_modules/mermaid/dist/mermaid.min.js"></script>
    <script type="text/javascript" src="node_modules/mermaid/dist/jquery.min.js"></script>

    <link rel="stylesheet" href="node_modules/mermaid/dist/mermaid.css"/>
    <script>
      mermaid.initialize({
        startOnLoad: true,
        cloneCssStyles: true,
        flowchart: {
          htmlLabels: false,
          useMaxWidth:false
        },
      });

      function renderToSvg(mermaidCode) {
        var container = document.getElementById("container")
        var holder = document.getElementById("mermaid-holder")

        while (holder.firstChild)
          holder.removeChild(holder.firstChild)

        var el = document.createElement("div")
            el.innerHTML = mermaidCode
            el.className = 'mermaid'

        holder.appendChild(el)

        mermaid.init()

        return (new XMLSerializer()).serializeToString(container)
      }

      // for debug and test rendering directly in browser
      //$( document ).ready(function() {
      //  var mm = "graph LR\nA[Hard edge] -->|Link text| B(Round edge)\nB --> C{Decision}\nC -->|One| D[Result one]\nC -->|Two| E[Result two]";
      //  renderToSvg(mm);
      //});
    </script>
  </head>
  <body>
    <div id="container" class="mermaid-container">
      <div id="mermaid-holder"></div>
    </div>
  </body>
</html>
